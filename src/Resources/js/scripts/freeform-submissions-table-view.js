!function(F){var Q={};function B(U){if(Q[U])return Q[U].exports;var t=Q[U]={i:U,l:!1,exports:{}};return F[U].call(t.exports,t,t.exports,B),t.l=!0,t.exports}B.m=F,B.c=Q,B.d=function(F,Q,U){B.o(F,Q)||Object.defineProperty(F,Q,{enumerable:!0,get:U})},B.r=function(F){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(F,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(F,"__esModule",{value:!0})},B.t=function(F,Q){if(1&Q&&(F=B(F)),8&Q)return F;if(4&Q&&"object"==typeof F&&F&&F.__esModule)return F;var U=Object.create(null);if(B.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:F}),2&Q&&"string"!=typeof F)for(var t in F)B.d(U,t,function(Q){return F[Q]}.bind(null,t));return U},B.n=function(F){var Q=F&&F.__esModule?function(){return F.default}:function(){return F};return B.d(Q,"a",Q),Q},B.o=function(F,Q){return Object.prototype.hasOwnProperty.call(F,Q)},B.p="",B(B.s=20)}({20:function(module,exports,__webpack_require__){eval('function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nif (_typeof(Craft.Freeform) === ( true ? "undefined" : undefined)) {\n  Craft.Freeform = {};\n}\n/**\n * Class Craft.Freeform.SubmissionsTableView\n */\n\n\nCraft.Freeform.SubmissionsTableView = Craft.TableElementIndexView.extend({\n  startDate: null,\n  endDate: null,\n  startDatepicker: null,\n  endDatepicker: null,\n  $chartExplorer: null,\n  $totalValue: null,\n  $chartContainer: null,\n  $spinner: null,\n  $error: null,\n  $chart: null,\n  $startDate: null,\n  $endDate: null,\n  afterInit: function afterInit() {\n    this.$explorerContainer = $("<div class=\\"chart-explorer-container\\"></div>").prependTo(this.$container);\n    this.createChartExplorer();\n    this.base();\n  },\n  getStorage: function getStorage(key) {\n    return Craft.Freeform.SubmissionsTableView.getStorage(this.elementIndex._namespace, key);\n  },\n  setStorage: function setStorage(key, value) {\n    Craft.Freeform.SubmissionsTableView.setStorage(this.elementIndex._namespace, key, value);\n  },\n  createChartExplorer: function createChartExplorer() {\n    // chart explorer\n    var $chartExplorer = $("<div class=\\"chart-explorer\\"></div>").appendTo(this.$explorerContainer),\n        $chartHeader = $("<div class=\\"chart-header\\"></div>").appendTo($chartExplorer),\n        $dateRange = $("<div class=\\"date-range\\" />").appendTo($chartHeader),\n        $startDateContainer = $("<div class=\\"datewrapper\\"></div>").appendTo($dateRange),\n        $to = $("<span class=\\"to light\\">to</span>").appendTo($dateRange),\n        $endDateContainer = $("<div class=\\"datewrapper\\"></div>").appendTo($dateRange),\n        $total = $("<div class=\\"total\\"></div>").appendTo($chartHeader),\n        $totalLabel = $("<div class=\\"total-label light\\">" + Craft.t("app", "Total Submissions") + "</div>").appendTo($total),\n        $totalValueWrapper = $("<div class=\\"total-value-wrapper\\"></div>").appendTo($total),\n        $totalValue = $("<span class=\\"total-value\\">&nbsp;</span>").appendTo($totalValueWrapper);\n    this.$chartExplorer = $chartExplorer;\n    this.$totalValue = $totalValue;\n    this.$chartContainer = $("<div class=\\"chart-container\\"></div>").appendTo($chartExplorer);\n    this.$spinner = $("<div class=\\"spinner hidden\\" />").prependTo($chartHeader);\n    this.$error = $("<div class=\\"error\\"></div>").appendTo(this.$chartContainer);\n    this.$chart = $("<div class=\\"chart\\"></div>").appendTo(this.$chartContainer);\n    this.$startDate = $("<input type=\\"text\\" class=\\"text\\" size=\\"20\\" autocomplete=\\"off\\" />").appendTo($startDateContainer);\n    this.$endDate = $("<input type=\\"text\\" class=\\"text\\" size=\\"20\\" autocomplete=\\"off\\" />").appendTo($endDateContainer);\n    this.$startDate.datepicker($.extend({\n      onSelect: $.proxy(this, "handleStartDateChange")\n    }, Craft.datepickerOptions));\n    this.$endDate.datepicker($.extend({\n      onSelect: $.proxy(this, "handleEndDateChange")\n    }, Craft.datepickerOptions));\n    this.startDatepicker = this.$startDate.data("datepicker");\n    this.endDatepicker = this.$endDate.data("datepicker");\n    this.addListener(this.$startDate, "keyup", "handleStartDateChange");\n    this.addListener(this.$endDate, "keyup", "handleEndDateChange"); // Set the start/end dates\n\n    var startTime = this.getStorage("startTime") || new Date().getTime() - 60 * 60 * 24 * 30 * 1000,\n        endTime = this.getStorage("endTime") || new Date().getTime();\n    this.setStartDate(new Date(startTime));\n    this.setEndDate(new Date(endTime)); // Load the report\n\n    this.loadReport();\n  },\n  handleStartDateChange: function handleStartDateChange() {\n    if (this.setStartDate(Craft.Freeform.SubmissionsTableView.getDateFromDatepickerInstance(this.startDatepicker))) {\n      this.loadReport();\n    }\n  },\n  handleEndDateChange: function handleEndDateChange() {\n    if (this.setEndDate(Craft.Freeform.SubmissionsTableView.getDateFromDatepickerInstance(this.endDatepicker))) {\n      this.loadReport();\n    }\n  },\n  setStartDate: function setStartDate(date) {\n    // Make sure it has actually changed\n    if (this.startDate && date.getTime() == this.startDate.getTime()) {\n      return false;\n    }\n\n    this.startDate = date;\n    this.setStorage("startTime", this.startDate.getTime());\n    this.$startDate.val(Craft.formatDate(this.startDate)); // If this is after the current end date, set the end date to match it\n\n    if (this.endDate && this.startDate.getTime() > this.endDate.getTime()) {\n      this.setEndDate(new Date(this.startDate.getTime()));\n    }\n\n    return true;\n  },\n  setEndDate: function setEndDate(date) {\n    // Make sure it has actually changed\n    if (this.endDate && date.getTime() == this.endDate.getTime()) {\n      return false;\n    }\n\n    this.endDate = date;\n    this.setStorage("endTime", this.endDate.getTime());\n    this.$endDate.val(Craft.formatDate(this.endDate)); // If this is before the current start date, set the start date to match it\n\n    if (this.startDate && this.endDate.getTime() < this.startDate.getTime()) {\n      this.setStartDate(new Date(this.endDate.getTime()));\n    }\n\n    return true;\n  },\n  loadReport: function loadReport() {\n    var requestData = this.settings.params;\n    requestData.startDate = Craft.Freeform.SubmissionsTableView.getDateValue(this.startDate);\n    requestData.endDate = Craft.Freeform.SubmissionsTableView.getDateValue(this.endDate);\n    requestData.isSpam = false;\n    this.$spinner.removeClass("hidden");\n    this.$error.addClass("hidden");\n    this.$chart.removeClass("error");\n    Craft.postActionRequest("freeform/api/get-submission-data", requestData, $.proxy(function (response, textStatus) {\n      this.$spinner.addClass("hidden");\n\n      if (textStatus == "success" && typeof response.error == "undefined") {\n        if (!this.chart) {\n          this.chart = new Craft.charts.Area(this.$chart);\n        }\n\n        var chartDataTable = new Craft.charts.DataTable(response.dataTable);\n        var chartSettings = {\n          localeDefinition: response.localeDefinition,\n          orientation: response.orientation,\n          formats: response.formats,\n          dataScale: response.scale\n        };\n        this.chart.draw(chartDataTable, chartSettings);\n        this.$totalValue.html(response.totalHtml);\n      } else {\n        var msg = Craft.t("An unknown error occurred.");\n\n        if (typeof response != "undefined" && response && typeof response.error != "undefined") {\n          msg = response.error;\n        }\n\n        this.$error.html(msg);\n        this.$error.removeClass("hidden");\n        this.$chart.addClass("error");\n      }\n    }, this));\n  }\n}, {\n  storage: {},\n  getStorage: function getStorage(namespace, key) {\n    if (Craft.Freeform.SubmissionsTableView.storage[namespace] && Craft.Freeform.SubmissionsTableView.storage[namespace][key]) {\n      return Craft.Freeform.SubmissionsTableView.storage[namespace][key];\n    }\n\n    return null;\n  },\n  setStorage: function setStorage(namespace, key, value) {\n    if (_typeof(Craft.Freeform.SubmissionsTableView.storage[namespace]) == ( true ? "undefined" : undefined)) {\n      Craft.Freeform.SubmissionsTableView.storage[namespace] = {};\n    }\n\n    Craft.Freeform.SubmissionsTableView.storage[namespace][key] = value;\n  },\n  getDateFromDatepickerInstance: function getDateFromDatepickerInstance(inst) {\n    return new Date(inst.currentYear, inst.currentMonth, inst.currentDay);\n  },\n  getDateValue: function getDateValue(date) {\n    return date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZnJlZWZvcm0tc3VibWlzc2lvbnMtdGFibGUtdmlldy5qcz9iMjE3Il0sIm5hbWVzIjpbIkNyYWZ0IiwiRnJlZWZvcm0iLCJTdWJtaXNzaW9uc1RhYmxlVmlldyIsIlRhYmxlRWxlbWVudEluZGV4VmlldyIsImV4dGVuZCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJzdGFydERhdGVwaWNrZXIiLCJlbmREYXRlcGlja2VyIiwiJGNoYXJ0RXhwbG9yZXIiLCIkdG90YWxWYWx1ZSIsIiRjaGFydENvbnRhaW5lciIsIiRzcGlubmVyIiwiJGVycm9yIiwiJGNoYXJ0IiwiJHN0YXJ0RGF0ZSIsIiRlbmREYXRlIiwiYWZ0ZXJJbml0IiwiJGV4cGxvcmVyQ29udGFpbmVyIiwiJCIsInByZXBlbmRUbyIsIiRjb250YWluZXIiLCJjcmVhdGVDaGFydEV4cGxvcmVyIiwiYmFzZSIsImdldFN0b3JhZ2UiLCJrZXkiLCJlbGVtZW50SW5kZXgiLCJfbmFtZXNwYWNlIiwic2V0U3RvcmFnZSIsInZhbHVlIiwiYXBwZW5kVG8iLCIkY2hhcnRIZWFkZXIiLCIkZGF0ZVJhbmdlIiwiJHN0YXJ0RGF0ZUNvbnRhaW5lciIsIiR0byIsIiRlbmREYXRlQ29udGFpbmVyIiwiJHRvdGFsIiwiJHRvdGFsTGFiZWwiLCJ0IiwiJHRvdGFsVmFsdWVXcmFwcGVyIiwiZGF0ZXBpY2tlciIsIm9uU2VsZWN0IiwicHJveHkiLCJkYXRlcGlja2VyT3B0aW9ucyIsImRhdGEiLCJhZGRMaXN0ZW5lciIsInN0YXJ0VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiZW5kVGltZSIsInNldFN0YXJ0RGF0ZSIsInNldEVuZERhdGUiLCJsb2FkUmVwb3J0IiwiaGFuZGxlU3RhcnREYXRlQ2hhbmdlIiwiZ2V0RGF0ZUZyb21EYXRlcGlja2VySW5zdGFuY2UiLCJoYW5kbGVFbmREYXRlQ2hhbmdlIiwiZGF0ZSIsInZhbCIsImZvcm1hdERhdGUiLCJyZXF1ZXN0RGF0YSIsInNldHRpbmdzIiwicGFyYW1zIiwiZ2V0RGF0ZVZhbHVlIiwiaXNTcGFtIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInBvc3RBY3Rpb25SZXF1ZXN0IiwicmVzcG9uc2UiLCJ0ZXh0U3RhdHVzIiwiZXJyb3IiLCJjaGFydCIsImNoYXJ0cyIsIkFyZWEiLCJjaGFydERhdGFUYWJsZSIsIkRhdGFUYWJsZSIsImRhdGFUYWJsZSIsImNoYXJ0U2V0dGluZ3MiLCJsb2NhbGVEZWZpbml0aW9uIiwib3JpZW50YXRpb24iLCJmb3JtYXRzIiwiZGF0YVNjYWxlIiwic2NhbGUiLCJkcmF3IiwiaHRtbCIsInRvdGFsSHRtbCIsIm1zZyIsInN0b3JhZ2UiLCJuYW1lc3BhY2UiLCJpbnN0IiwiY3VycmVudFllYXIiLCJjdXJyZW50TW9udGgiLCJjdXJyZW50RGF5IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImdldERhdGUiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxRQUFPQSxLQUFLLENBQUNDLFFBQWIsdUNBQUosRUFBZ0Q7QUFDOUNELE9BQUssQ0FBQ0MsUUFBTixHQUFpQixFQUFqQjtBQUNEO0FBRUQ7QUFDQTtBQUNBOzs7QUFDQUQsS0FBSyxDQUFDQyxRQUFOLENBQWVDLG9CQUFmLEdBQXNDRixLQUFLLENBQUNHLHFCQUFOLENBQTRCQyxNQUE1QixDQUFtQztBQUNyRUMsV0FBUyxFQUFFLElBRDBEO0FBRXJFQyxTQUFPLEVBQUUsSUFGNEQ7QUFJckVDLGlCQUFlLEVBQUUsSUFKb0Q7QUFLckVDLGVBQWEsRUFBRSxJQUxzRDtBQU9yRUMsZ0JBQWMsRUFBRSxJQVBxRDtBQVFyRUMsYUFBVyxFQUFFLElBUndEO0FBU3JFQyxpQkFBZSxFQUFFLElBVG9EO0FBVXJFQyxVQUFRLEVBQUUsSUFWMkQ7QUFXckVDLFFBQU0sRUFBRSxJQVg2RDtBQVlyRUMsUUFBTSxFQUFFLElBWjZEO0FBYXJFQyxZQUFVLEVBQUUsSUFieUQ7QUFjckVDLFVBQVEsRUFBRSxJQWQyRDtBQWdCckVDLFdBQVMsRUFBRSxxQkFBWTtBQUNyQixTQUFL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RUR2RixTQUFLLENBQUNDLFFBQU4sQ0FBZUMsb0JBQWYsQ0FBb0NvRixPQUFwQyxDQUE0Q0MsU0FBNUMsRUFBdUQ5RCxHQUF2RCxJQUE4REksS0FBOUQ7QUFDRCxHQWpCSDtBQW1CRXlCLCtCQUE2QixFQUFFLHVDQUFVa0MsSUFBVixFQUFnQjtBQUM3QyxXQUFPLElBQUl6QyxJQUFKLENBQVN5QyxJQUFJLENBQUNDLFdBQWQsRUFBMkJELElBQUksQ0FBQ0UsWUFBaEMsRUFBOENGLElBQUksQ0FBQ0csVUFBbkQsQ0FBUDtBQUNELEdBckJIO0FBdUJFN0IsY0FBWSxFQUFFLHNCQUFVTixJQUFWLEVBQWdCO0FBQzVCLFdBQU9BLElBQUksQ0FBQ29DLFdBQUwsS0FBcUIsR0FBckIsSUFBNEJwQyxJQUFJLENBQUNxQyxRQUFMLEtBQWtCLENBQTlDLElBQW1ELEdBQW5ELEdBQXlEckMsSUFBSSxDQUFDc0MsT0FBTCxFQUFoRTtBQUNEO0FBekJILENBaExvQyxDQUF0QyIsImZpbGUiOiIyMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmICh0eXBlb2YgQ3JhZnQuRnJlZWZvcm0gPT09IHR5cGVvZiB1bmRlZmluZWQpIHtcbiAgQ3JhZnQuRnJlZWZvcm0gPSB7fTtcbn1cblxuLyoqXG4gKiBDbGFzcyBDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlld1xuICovXG5DcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldyA9IENyYWZ0LlRhYmxlRWxlbWVudEluZGV4Vmlldy5leHRlbmQoe1xuICAgIHN0YXJ0RGF0ZTogbnVsbCxcbiAgICBlbmREYXRlOiBudWxsLFxuXG4gICAgc3RhcnREYXRlcGlja2VyOiBudWxsLFxuICAgIGVuZERhdGVwaWNrZXI6IG51bGwsXG5cbiAgICAkY2hhcnRFeHBsb3JlcjogbnVsbCxcbiAgICAkdG90YWxWYWx1ZTogbnVsbCxcbiAgICAkY2hhcnRDb250YWluZXI6IG51bGwsXG4gICAgJHNwaW5uZXI6IG51bGwsXG4gICAgJGVycm9yOiBudWxsLFxuICAgICRjaGFydDogbnVsbCxcbiAgICAkc3RhcnREYXRlOiBudWxsLFxuICAgICRlbmREYXRlOiBudWxsLFxuXG4gICAgYWZ0ZXJJbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRleHBsb3JlckNvbnRhaW5lciA9ICQoXCI8ZGl2IGNsYXNzPVxcXCJjaGFydC1leHBsb3Jlci1jb250YWluZXJcXFwiPjwvZGl2PlwiKS5wcmVwZW5kVG8odGhpcy4kY29udGFpbmVyKTtcblxuICAgICAgdGhpcy5jcmVhdGVDaGFydEV4cGxvcmVyKCk7XG5cbiAgICAgIHRoaXMuYmFzZSgpO1xuICAgIH0sXG5cbiAgICBnZXRTdG9yYWdlOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gQ3JhZnQuRnJlZWZvcm0uU3VibWlzc2lvbnNUYWJsZVZpZXcuZ2V0U3RvcmFnZSh0aGlzLmVsZW1lbnRJbmRleC5fbmFtZXNwYWNlLCBrZXkpO1xuICAgIH0sXG5cbiAgICBzZXRTdG9yYWdlOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgQ3JhZnQuRnJlZWZvcm0uU3VibWlzc2lvbnNUYWJsZVZpZXcuc2V0U3RvcmFnZSh0aGlzLmVsZW1lbnRJbmRleC5fbmFtZXNwYWNlLCBrZXksIHZhbHVlKTtcbiAgICB9LFxuXG4gICAgY3JlYXRlQ2hhcnRFeHBsb3JlcjogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gY2hhcnQgZXhwbG9yZXJcbiAgICAgIHZhciAkY2hhcnRFeHBsb3JlciAgICAgID0gJChcIjxkaXYgY2xhc3M9XFxcImNoYXJ0LWV4cGxvcmVyXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8odGhpcy4kZXhwbG9yZXJDb250YWluZXIpLFxuICAgICAgICAgICRjaGFydEhlYWRlciAgICAgICAgPSAkKFwiPGRpdiBjbGFzcz1cXFwiY2hhcnQtaGVhZGVyXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8oJGNoYXJ0RXhwbG9yZXIpLFxuICAgICAgICAgICRkYXRlUmFuZ2UgICAgICAgICAgPSAkKFwiPGRpdiBjbGFzcz1cXFwiZGF0ZS1yYW5nZVxcXCIgLz5cIikuYXBwZW5kVG8oJGNoYXJ0SGVhZGVyKSxcbiAgICAgICAgICAkc3RhcnREYXRlQ29udGFpbmVyID0gJChcIjxkaXYgY2xhc3M9XFxcImRhdGV3cmFwcGVyXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8oJGRhdGVSYW5nZSksXG4gICAgICAgICAgJHRvICAgICAgICAgICAgICAgICA9ICQoXCI8c3BhbiBjbGFzcz1cXFwidG8gbGlnaHRcXFwiPnRvPC9zcGFuPlwiKS5hcHBlbmRUbygkZGF0ZVJhbmdlKSxcbiAgICAgICAgICAkZW5kRGF0ZUNvbnRhaW5lciAgID0gJChcIjxkaXYgY2xhc3M9XFxcImRhdGV3cmFwcGVyXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8oJGRhdGVSYW5nZSksXG4gICAgICAgICAgJHRvdGFsICAgICAgICAgICAgICA9ICQoXCI8ZGl2IGNsYXNzPVxcXCJ0b3RhbFxcXCI+PC9kaXY+XCIpLmFwcGVuZFRvKCRjaGFydEhlYWRlciksXG4gICAgICAgICAgJHRvdGFsTGFiZWwgICAgICAgICA9ICQoXCI8ZGl2IGNsYXNzPVxcXCJ0b3RhbC1sYWJlbCBsaWdodFxcXCI+XCIgKyBDcmFmdC50KFwiYXBwXCIsIFwiVG90YWwgU3VibWlzc2lvbnNcIikgKyBcIjwvZGl2PlwiKVxuICAgICAgICAgICAgLmFwcGVuZFRvKCR0b3RhbCksXG4gICAgICAgICAgJHRvdGFsVmFsdWVXcmFwcGVyICA9ICQoXCI8ZGl2IGNsYXNzPVxcXCJ0b3RhbC12YWx1ZS13cmFwcGVyXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8oJHRvdGFsKSxcbiAgICAgICAgICAkdG90YWxWYWx1ZSAgICAgICAgID0gJChcIjxzcGFuIGNsYXNzPVxcXCJ0b3RhbC12YWx1ZVxcXCI+Jm5ic3A7PC9zcGFuPlwiKS5hcHBlbmRUbygkdG90YWxWYWx1ZVdyYXBwZXIpO1xuXG4gICAgICB0aGlzLiRjaGFydEV4cGxvcmVyICA9ICRjaGFydEV4cGxvcmVyO1xuICAgICAgdGhpcy4kdG90YWxWYWx1ZSAgICAgPSAkdG90YWxWYWx1ZTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyID0gJChcIjxkaXYgY2xhc3M9XFxcImNoYXJ0LWNvbnRhaW5lclxcXCI+PC9kaXY+XCIpLmFwcGVuZFRvKCRjaGFydEV4cGxvcmVyKTtcbiAgICAgIHRoaXMuJHNwaW5uZXIgICAgICAgID0gJChcIjxkaXYgY2xhc3M9XFxcInNwaW5uZXIgaGlkZGVuXFxcIiAvPlwiKS5wcmVwZW5kVG8oJGNoYXJ0SGVhZGVyKTtcbiAgICAgIHRoaXMuJGVycm9yICAgICAgICAgID0gJChcIjxkaXYgY2xhc3M9XFxcImVycm9yXFxcIj48L2Rpdj5cIikuYXBwZW5kVG8odGhpcy4kY2hhcnRDb250YWluZXIpO1xuICAgICAgdGhpcy4kY2hhcnQgICAgICAgICAgPSAkKFwiPGRpdiBjbGFzcz1cXFwiY2hhcnRcXFwiPjwvZGl2PlwiKS5hcHBlbmRUbyh0aGlzLiRjaGFydENvbnRhaW5lcik7XG5cbiAgICAgIHRoaXMuJHN0YXJ0RGF0ZSA9ICQoXCI8aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgY2xhc3M9XFxcInRleHRcXFwiIHNpemU9XFxcIjIwXFxcIiBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgLz5cIilcbiAgICAgICAgLmFwcGVuZFRvKCRzdGFydERhdGVDb250YWluZXIpO1xuICAgICAgdGhpcy4kZW5kRGF0ZSAgID0gJChcIjxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBjbGFzcz1cXFwidGV4dFxcXCIgc2l6ZT1cXFwiMjBcXFwiIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiAvPlwiKS5hcHBlbmRUbygkZW5kRGF0ZUNvbnRhaW5lcik7XG5cbiAgICAgIHRoaXMuJHN0YXJ0RGF0ZS5kYXRlcGlja2VyKCQuZXh0ZW5kKHtcbiAgICAgICAgb25TZWxlY3Q6ICQucHJveHkodGhpcywgXCJoYW5kbGVTdGFydERhdGVDaGFuZ2VcIiksXG4gICAgICB9LCBDcmFmdC5kYXRlcGlja2VyT3B0aW9ucykpO1xuXG4gICAgICB0aGlzLiRlbmREYXRlLmRhdGVwaWNrZXIoJC5leHRlbmQoe1xuICAgICAgICBvblNlbGVjdDogJC5wcm94eSh0aGlzLCBcImhhbmRsZUVuZERhdGVDaGFuZ2VcIiksXG4gICAgICB9LCBDcmFmdC5kYXRlcGlja2VyT3B0aW9ucykpO1xuXG4gICAgICB0aGlzLnN0YXJ0RGF0ZXBpY2tlciA9IHRoaXMuJHN0YXJ0RGF0ZS5kYXRhKFwiZGF0ZXBpY2tlclwiKTtcbiAgICAgIHRoaXMuZW5kRGF0ZXBpY2tlciAgID0gdGhpcy4kZW5kRGF0ZS5kYXRhKFwiZGF0ZXBpY2tlclwiKTtcblxuICAgICAgdGhpcy5hZGRMaXN0ZW5lcih0aGlzLiRzdGFydERhdGUsIFwia2V5dXBcIiwgXCJoYW5kbGVTdGFydERhdGVDaGFuZ2VcIik7XG4gICAgICB0aGlzLmFkZExpc3RlbmVyKHRoaXMuJGVuZERhdGUsIFwia2V5dXBcIiwgXCJoYW5kbGVFbmREYXRlQ2hhbmdlXCIpO1xuXG4gICAgICAvLyBTZXQgdGhlIHN0YXJ0L2VuZCBkYXRlc1xuICAgICAgdmFyIHN0YXJ0VGltZSA9IHRoaXMuZ2V0U3RvcmFnZShcInN0YXJ0VGltZVwiKSB8fCAoKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAtICg2MCAqIDYwICogMjQgKiAzMCAqIDEwMDApKSxcbiAgICAgICAgICBlbmRUaW1lICAgPSB0aGlzLmdldFN0b3JhZ2UoXCJlbmRUaW1lXCIpIHx8ICgobmV3IERhdGUoKSkuZ2V0VGltZSgpKTtcblxuICAgICAgdGhpcy5zZXRTdGFydERhdGUobmV3IERhdGUoc3RhcnRUaW1lKSk7XG4gICAgICB0aGlzLnNldEVuZERhdGUobmV3IERhdGUoZW5kVGltZSkpO1xuXG4gICAgICAvLyBMb2FkIHRoZSByZXBvcnRcbiAgICAgIHRoaXMubG9hZFJlcG9ydCgpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVTdGFydERhdGVDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnNldFN0YXJ0RGF0ZShDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldy5nZXREYXRlRnJvbURhdGVwaWNrZXJJbnN0YW5jZSh0aGlzLnN0YXJ0RGF0ZXBpY2tlcikpKSB7XG4gICAgICAgIHRoaXMubG9hZFJlcG9ydCgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVFbmREYXRlQ2hhbmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5zZXRFbmREYXRlKENyYWZ0LkZyZWVmb3JtLlN1Ym1pc3Npb25zVGFibGVWaWV3LmdldERhdGVGcm9tRGF0ZXBpY2tlckluc3RhbmNlKHRoaXMuZW5kRGF0ZXBpY2tlcikpKSB7XG4gICAgICAgIHRoaXMubG9hZFJlcG9ydCgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzZXRTdGFydERhdGU6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgaXQgaGFzIGFjdHVhbGx5IGNoYW5nZWRcbiAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZSAmJiBkYXRlLmdldFRpbWUoKSA9PSB0aGlzLnN0YXJ0RGF0ZS5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnN0YXJ0RGF0ZSA9IGRhdGU7XG4gICAgICB0aGlzLnNldFN0b3JhZ2UoXCJzdGFydFRpbWVcIiwgdGhpcy5zdGFydERhdGUuZ2V0VGltZSgpKTtcbiAgICAgIHRoaXMuJHN0YXJ0RGF0ZS52YWwoQ3JhZnQuZm9ybWF0RGF0ZSh0aGlzLnN0YXJ0RGF0ZSkpO1xuXG4gICAgICAvLyBJZiB0aGlzIGlzIGFmdGVyIHRoZSBjdXJyZW50IGVuZCBkYXRlLCBzZXQgdGhlIGVuZCBkYXRlIHRvIG1hdGNoIGl0XG4gICAgICBpZiAodGhpcy5lbmREYXRlICYmIHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKSA+IHRoaXMuZW5kRGF0ZS5nZXRUaW1lKCkpIHtcbiAgICAgICAgdGhpcy5zZXRFbmREYXRlKG5ldyBEYXRlKHRoaXMuc3RhcnREYXRlLmdldFRpbWUoKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuXG4gICAgc2V0RW5kRGF0ZTogZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSBpdCBoYXMgYWN0dWFsbHkgY2hhbmdlZFxuICAgICAgaWYgKHRoaXMuZW5kRGF0ZSAmJiBkYXRlLmdldFRpbWUoKSA9PSB0aGlzLmVuZERhdGUuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5lbmREYXRlID0gZGF0ZTtcbiAgICAgIHRoaXMuc2V0U3RvcmFnZShcImVuZFRpbWVcIiwgdGhpcy5lbmREYXRlLmdldFRpbWUoKSk7XG4gICAgICB0aGlzLiRlbmREYXRlLnZhbChDcmFmdC5mb3JtYXREYXRlKHRoaXMuZW5kRGF0ZSkpO1xuXG4gICAgICAvLyBJZiB0aGlzIGlzIGJlZm9yZSB0aGUgY3VycmVudCBzdGFydCBkYXRlLCBzZXQgdGhlIHN0YXJ0IGRhdGUgdG8gbWF0Y2ggaXRcbiAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZSAmJiB0aGlzLmVuZERhdGUuZ2V0VGltZSgpIDwgdGhpcy5zdGFydERhdGUuZ2V0VGltZSgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhcnREYXRlKG5ldyBEYXRlKHRoaXMuZW5kRGF0ZS5nZXRUaW1lKCkpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIGxvYWRSZXBvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IHRoaXMuc2V0dGluZ3MucGFyYW1zO1xuXG4gICAgICByZXF1ZXN0RGF0YS5zdGFydERhdGUgPSBDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldy5nZXREYXRlVmFsdWUodGhpcy5zdGFydERhdGUpO1xuICAgICAgcmVxdWVzdERhdGEuZW5kRGF0ZSAgID0gQ3JhZnQuRnJlZWZvcm0uU3VibWlzc2lvbnNUYWJsZVZpZXcuZ2V0RGF0ZVZhbHVlKHRoaXMuZW5kRGF0ZSk7XG4gICAgICByZXF1ZXN0RGF0YS5pc1NwYW0gICAgPSBmYWxzZTtcblxuICAgICAgdGhpcy4kc3Bpbm5lci5yZW1vdmVDbGFzcyhcImhpZGRlblwiKTtcbiAgICAgIHRoaXMuJGVycm9yLmFkZENsYXNzKFwiaGlkZGVuXCIpO1xuICAgICAgdGhpcy4kY2hhcnQucmVtb3ZlQ2xhc3MoXCJlcnJvclwiKTtcblxuICAgICAgQ3JhZnQucG9zdEFjdGlvblJlcXVlc3QoXCJmcmVlZm9ybS9hcGkvZ2V0LXN1Ym1pc3Npb24tZGF0YVwiLCByZXF1ZXN0RGF0YSwgJC5wcm94eShmdW5jdGlvbiAocmVzcG9uc2UsIHRleHRTdGF0dXMpIHtcbiAgICAgICAgdGhpcy4kc3Bpbm5lci5hZGRDbGFzcyhcImhpZGRlblwiKTtcblxuICAgICAgICBpZiAodGV4dFN0YXR1cyA9PSBcInN1Y2Nlc3NcIiAmJiB0eXBlb2YocmVzcG9uc2UuZXJyb3IpID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBpZiAoIXRoaXMuY2hhcnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhcnQgPSBuZXcgQ3JhZnQuY2hhcnRzLkFyZWEodGhpcy4kY2hhcnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBjaGFydERhdGFUYWJsZSA9IG5ldyBDcmFmdC5jaGFydHMuRGF0YVRhYmxlKHJlc3BvbnNlLmRhdGFUYWJsZSk7XG5cbiAgICAgICAgICB2YXIgY2hhcnRTZXR0aW5ncyA9IHtcbiAgICAgICAgICAgIGxvY2FsZURlZmluaXRpb246IHJlc3BvbnNlLmxvY2FsZURlZmluaXRpb24sXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogcmVzcG9uc2Uub3JpZW50YXRpb24sXG4gICAgICAgICAgICBmb3JtYXRzOiByZXNwb25zZS5mb3JtYXRzLFxuICAgICAgICAgICAgZGF0YVNjYWxlOiByZXNwb25zZS5zY2FsZSxcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgdGhpcy5jaGFydC5kcmF3KGNoYXJ0RGF0YVRhYmxlLCBjaGFydFNldHRpbmdzKTtcblxuICAgICAgICAgIHRoaXMuJHRvdGFsVmFsdWUuaHRtbChyZXNwb25zZS50b3RhbEh0bWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHZhciBtc2cgPSBDcmFmdC50KFwiQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC5cIik7XG5cbiAgICAgICAgICBpZiAodHlwZW9mKHJlc3BvbnNlKSAhPSBcInVuZGVmaW5lZFwiICYmIHJlc3BvbnNlICYmIHR5cGVvZihyZXNwb25zZS5lcnJvcikgIT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgbXNnID0gcmVzcG9uc2UuZXJyb3I7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy4kZXJyb3IuaHRtbChtc2cpO1xuICAgICAgICAgIHRoaXMuJGVycm9yLnJlbW92ZUNsYXNzKFwiaGlkZGVuXCIpO1xuICAgICAgICAgIHRoaXMuJGNoYXJ0LmFkZENsYXNzKFwiZXJyb3JcIik7XG4gICAgICAgIH1cbiAgICAgIH0sIHRoaXMpKTtcbiAgICB9LFxuICB9LFxuICB7XG4gICAgc3RvcmFnZToge30sXG5cbiAgICBnZXRTdG9yYWdlOiBmdW5jdGlvbiAobmFtZXNwYWNlLCBrZXkpIHtcbiAgICAgIGlmIChDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldy5zdG9yYWdlW25hbWVzcGFjZV0gJiYgQ3JhZnQuRnJlZWZvcm0uU3VibWlzc2lvbnNUYWJsZVZpZXcuc3RvcmFnZVtuYW1lc3BhY2VdW2tleV0pIHtcbiAgICAgICAgcmV0dXJuIENyYWZ0LkZyZWVmb3JtLlN1Ym1pc3Npb25zVGFibGVWaWV3LnN0b3JhZ2VbbmFtZXNwYWNlXVtrZXldO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG4gICAgc2V0U3RvcmFnZTogZnVuY3Rpb24gKG5hbWVzcGFjZSwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiBDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldy5zdG9yYWdlW25hbWVzcGFjZV0gPT0gdHlwZW9mIHVuZGVmaW5lZCkge1xuICAgICAgICBDcmFmdC5GcmVlZm9ybS5TdWJtaXNzaW9uc1RhYmxlVmlldy5zdG9yYWdlW25hbWVzcGFjZV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgQ3JhZnQuRnJlZWZvcm0uU3VibWlzc2lvbnNUYWJsZVZpZXcuc3RvcmFnZVtuYW1lc3BhY2VdW2tleV0gPSB2YWx1ZTtcbiAgICB9LFxuXG4gICAgZ2V0RGF0ZUZyb21EYXRlcGlja2VySW5zdGFuY2U6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoaW5zdC5jdXJyZW50WWVhciwgaW5zdC5jdXJyZW50TW9udGgsIGluc3QuY3VycmVudERheSk7XG4gICAgfSxcblxuICAgIGdldERhdGVWYWx1ZTogZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCkgKyBcIi1cIiArIChkYXRlLmdldE1vbnRoKCkgKyAxKSArIFwiLVwiICsgZGF0ZS5nZXREYXRlKCk7XG4gICAgfSxcbiAgfSxcbik7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')}});