!function(Q){var F={};function U(B){if(F[B])return F[B].exports;var I=F[B]={i:B,l:!1,exports:{}};return Q[B].call(I.exports,I,I.exports,U),I.l=!0,I.exports}U.m=Q,U.c=F,U.d=function(Q,F,B){U.o(Q,F)||Object.defineProperty(Q,F,{enumerable:!0,get:B})},U.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},U.t=function(Q,F){if(1&F&&(Q=U(Q)),8&F)return Q;if(4&F&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var B=Object.create(null);if(U.r(B),Object.defineProperty(B,"default",{enumerable:!0,value:Q}),2&F&&"string"!=typeof Q)for(var I in Q)U.d(B,I,function(F){return Q[F]}.bind(null,I));return B},U.n=function(Q){var F=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return U.d(F,"a",F),F},U.o=function(Q,F){return Object.prototype.hasOwnProperty.call(Q,F)},U.p="",U(U.s=10)}({10:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nvar wildcardToRegExp = function wildcardToRegExp(s) {\n  return new RegExp(\"^\".concat(s.split(/\\*+/).map(regExpEscape).join('.*'), \"$\"), 'i');\n};\n/**\n * RegExp-escapes all characters in the given string.\n */\n\n\nvar regExpEscape = function regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n};\n\nvar RuleSet = function RuleSet(form) {\n  var _this = this;\n\n  _classCallCheck(this, RuleSet);\n\n  this.RULE_TYPE_ANY = 'any';\n  this.RULE_TYPE_ALL = 'all';\n  this.EVENT_APPLY_RULES = 'ff-compile-rules';\n  this.containerMetaData = new WeakMap();\n\n  this.applyRules = function (event) {\n    var container = event.target;\n\n    var _this$containerMetaDa = _this.containerMetaData.get(container),\n        targets = _this$containerMetaDa.targets,\n        _this$containerMetaDa2 = _this$containerMetaDa.rule,\n        type = _this$containerMetaDa2.type,\n        show = _this$containerMetaDa2.show;\n\n    var triggersChange = type === _this.RULE_TYPE_ALL;\n    targets.forEach(function (target) {\n      var elements = target.elements,\n          operand = target.operand,\n          value = target.value;\n      var values = [];\n      var isCheckboxOrRadio = false;\n\n      for (var elementIndex = 0; elementIndex < elements.length; elementIndex++) {\n        var element = elements[elementIndex];\n\n        var _type = element.getAttribute('type');\n\n        if (['checkbox', 'radio'].indexOf(_type) !== -1) {\n          isCheckboxOrRadio = true;\n\n          if (element.checked) {\n            if (_type === 'checkbox' && !/\\]$/.test(element.name)) {\n              values.push('1');\n            } else {\n              values.push(element.value.toLowerCase());\n            }\n          }\n        } else {\n          values.push(element.value.toLowerCase());\n        }\n      }\n\n      var isMatching;\n\n      if (isCheckboxOrRadio && value === '') {\n        isMatching = operand === '=' ? !values.length : !!values.length;\n      } else {\n        var pattern = wildcardToRegExp(value);\n        var valueIsInList = false;\n\n        for (var valIndex = 0; valIndex < values.length; valIndex++) {\n          var val = values[valIndex];\n\n          if (pattern.test(val)) {\n            valueIsInList = true;\n          }\n        }\n\n        isMatching = operand === '=' ? valueIsInList : !valueIsInList;\n      }\n\n      if (type === _this.RULE_TYPE_ANY && isMatching) {\n        triggersChange = true;\n        return;\n      }\n\n      if (type === _this.RULE_TYPE_ALL && !isMatching) {\n        triggersChange = false;\n      }\n    });\n    container.dataset.hiddenByRules = triggersChange ? !show : show;\n    container.style.display = triggersChange ? show ? 'block' : 'none' : show ? 'none' : 'block';\n  };\n\n  this.getInputType = function (element) {\n    var tagName = element.tagName.toLowerCase();\n\n    if (['select', 'textarea'].indexOf(tagName) !== -1) {\n      return tagName;\n    }\n\n    if (element.classList.contains('form-date-time-field')) {\n      return 'date';\n    }\n\n    return element.getAttribute('type').toLowerCase();\n  };\n\n  this.createRuleApplicationEvent = function () {\n    var event = document.createEvent('Event');\n    event.initEvent(_this.EVENT_APPLY_RULES, true, true);\n    return event;\n  };\n\n  if (form.dataset.hasRules === undefined) {\n    return;\n  }\n\n  var containers = form.querySelectorAll('*[data-ff-rule]');\n  containers.forEach(function (container) {\n    var json = container.dataset.ffRule;\n\n    if (/^'.*'$/.test(json)) {\n      json = json.substring(1, json.length - 1);\n    }\n\n    var rule = JSON.parse(json);\n    var targets = [];\n    rule.criteria.forEach(function (criteria) {\n      var target = criteria.tgt,\n          operand = criteria.o,\n          value = criteria.val;\n      var elements;\n      var isMultiple = false;\n\n      if (form.elements[target]) {\n        var tagName = form.elements[target].tagName;\n\n        if (tagName) {\n          elements = [form.elements[target]];\n        } else {\n          elements = form.elements[target];\n        }\n      } else if (form.elements[target + '[]']) {\n        elements = form.elements[target + '[]'];\n        isMultiple = true;\n      }\n\n      targets.push({\n        isMultiple: isMultiple,\n        elements: elements,\n        operand: operand,\n        value: value\n      });\n\n      for (var elementIndex = 0; elementIndex < elements.length; elementIndex++) {\n        var element = elements[elementIndex];\n        var eventType = void 0;\n\n        switch (_this.getInputType(element)) {\n          case 'checkbox':\n          case 'radio':\n            eventType = 'click';\n            break;\n\n          case 'select':\n          case 'date':\n            eventType = 'change';\n            break;\n\n          default:\n            eventType = 'keyup';\n            break;\n        }\n\n        element.addEventListener(eventType, function () {\n          return container.dispatchEvent(_this.createRuleApplicationEvent());\n        });\n      }\n    });\n\n    _this.containerMetaData.set(container, {\n      rule: rule,\n      targets: targets\n    });\n\n    container.addEventListener(_this.EVENT_APPLY_RULES, _this.applyRules);\n    container.dispatchEvent(_this.createRuleApplicationEvent());\n  });\n}\n/**\n * Applies all of the rules for the target container\n * decides whether to show or hide it based on its rules\n *\n * @param event\n */\n;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (RuleSet);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZnJvbnQtZW5kL3BsdWdpbi9mb3JtL3J1bGVzLmpzPzljYmMiXSwibmFtZXMiOlsid2lsZGNhcmRUb1JlZ0V4cCIsInMiLCJSZWdFeHAiLCJzcGxpdCIsIm1hcCIsInJlZ0V4cEVzY2FwZSIsImpvaW4iLCJyZXBsYWNlIiwiUnVsZVNldCIsImZvcm0iLCJSVUxFX1RZUEVfQU5ZIiwiUlVMRV9UWVBFX0FMTCIsIkVWRU5UX0FQUExZX1JVTEVTIiwiY29udGFpbmVyTWV0YURhdGEiLCJXZWFrTWFwIiwiYXBwbHlSdWxlcyIsImV2ZW50IiwiY29udGFpbmVyIiwidGFyZ2V0IiwiZ2V0IiwidGFyZ2V0cyIsInJ1bGUiLCJ0eXBlIiwic2hvdyIsInRyaWdnZXJzQ2hhbmdlIiwiZm9yRWFjaCIsImVsZW1lbnRzIiwib3BlcmFuZCIsInZhbHVlIiwidmFsdWVzIiwiaXNDaGVja2JveE9yUmFkaW8iLCJlbGVtZW50SW5kZXgiLCJsZW5ndGgiLCJlbGVtZW50IiwiZ2V0QXR0cmlidXRlIiwiaW5kZXhPZiIsImNoZWNrZWQiLCJ0ZXN0IiwibmFtZSIsInB1c2giLCJ0b0xvd2VyQ2FzZSIsImlzTWF0Y2hpbmciLCJwYXR0ZXJuIiwidmFsdWVJc0luTGlzdCIsInZhbEluZGV4IiwidmFsIiwiZGF0YXNldCIsImhpZGRlbkJ5UnVsZXMiLCJzdHlsZSIsImRpc3BsYXkiLCJnZXRJbnB1dFR5cGUiLCJ0YWdOYW1lIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJjcmVhdGVSdWxlQXBwbGljYXRpb25FdmVudCIsImRvY3VtZW50IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJoYXNSdWxlcyIsInVuZGVmaW5lZCIsImNvbnRhaW5lcnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwianNvbiIsImZmUnVsZSIsInN1YnN0cmluZyIsIkpTT04iLCJwYXJzZSIsImNyaXRlcmlhIiwidGd0IiwibyIsImlzTXVsdGlwbGUiLCJldmVudFR5cGUiLCJhZGRFdmVu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QUFDTSxNQUFuRCxFQUEyREQsWUFBWSxFQUF2RSxFQUEyRTtBQUN6RSxZQUFNRSxPQUFPLEdBQUdQLFFBQVEsQ0FBQ0ssWUFBRCxDQUF4QjtBQUVBLFlBQUl3QyxTQUFTLFNBQWI7O0FBQ0EsZ0JBQVEsS0FBSSxDQUFDckIsWUFBTCxDQUFrQmpCLE9BQWxCLENBQVI7QUFDRSxlQUFLLFVBQUw7QUFDQSxlQUFLLE9BQUw7QUFDRXNDLHFCQUFTLEdBQUcsT0FBWjtBQUNBOztBQUVGLGVBQUssUUFBTDtBQUNBLGVBQUssTUFBTDtBQUNFQSxxQkFBUyxHQUFHLFFBQVo7QUFDQTs7QUFFRjtBQUNFQSxxQkFBUyxHQUFHLE9BQVo7QUFDQTtBQWJKOztBQWdCQXRDLGVBQU8sQ0FBQ3VDLGdCQUFSLENBQXlCRCxTQUF6QixFQUFvQztBQUFBLGlCQUFNdEQsU0FBUyxDQUFDd0QsYUFBVixDQUF3QixLQUFJLENBQUNuQiwwQkFBTCxFQUF4QixDQUFOO0FBQUEsU0FBcEM7QUFDRDtBQUNGLEtBL0NEOztBQWlEQSxTQUFJLENBQUN6QyxpQkFBTCxDQUF1QjZELEdBQXZCLENBQTJCekQsU0FBM0IsRUFBc0M7QUFBRUksVUFBSSxFQUFKQSxJQUFGO0FBQVFELGFBQU8sRUFBUEE7QUFBUixLQUF0Qzs7QUFFQUgsYUFBUyxDQUFDdUQsZ0JBQVYsQ0FBMkIsS0FBSSxDQUFDNUQsaUJBQWhDLEVBQW1ELEtBQUksQ0FBQ0csVUFBeEQ7QUFDQUUsYUFBUyxDQUFDd0QsYUFBVixDQUF3QixLQUFJLENBQUNuQiwwQkFBTCxFQUF4QjtBQUNELEdBOUREO0FBK0REO0FBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUE2RmU5QyxzRUFBZiIsImZpbGUiOiIxMC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlcyBhIFJlZ0V4cCBmcm9tIHRoZSBnaXZlbiBzdHJpbmcsIGNvbnZlcnRpbmcgYXN0ZXJpc2tzIHRvIC4qIGV4cHJlc3Npb25zLFxuICogYW5kIGVzY2FwaW5nIGFsbCBvdGhlciBjaGFyYWN0ZXJzLlxuICovXG5jb25zdCB3aWxkY2FyZFRvUmVnRXhwID0gKHMpID0+IG5ldyBSZWdFeHAoYF4ke3Muc3BsaXQoL1xcKisvKS5tYXAocmVnRXhwRXNjYXBlKS5qb2luKCcuKicpfSRgLCAnaScpO1xuXG4vKipcbiAqIFJlZ0V4cC1lc2NhcGVzIGFsbCBjaGFyYWN0ZXJzIGluIHRoZSBnaXZlbiBzdHJpbmcuXG4gKi9cbmNvbnN0IHJlZ0V4cEVzY2FwZSA9IChzKSA9PiBzLnJlcGxhY2UoL1t8XFxcXHt9KClbXFxdXiQrKj8uXS9nLCAnXFxcXCQmJyk7XG5cbmNsYXNzIFJ1bGVTZXQge1xuICBSVUxFX1RZUEVfQU5ZID0gJ2FueSc7XG4gIFJVTEVfVFlQRV9BTEwgPSAnYWxsJztcbiAgRVZFTlRfQVBQTFlfUlVMRVMgPSAnZmYtY29tcGlsZS1ydWxlcyc7XG5cbiAgY29udGFpbmVyTWV0YURhdGEgPSBuZXcgV2Vha01hcCgpO1xuXG4gIGNvbnN0cnVjdG9yKGZvcm0pIHtcbiAgICBpZiAoZm9ybS5kYXRhc2V0Lmhhc1J1bGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb250YWluZXJzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcqW2RhdGEtZmYtcnVsZV0nKTtcbiAgICBjb250YWluZXJzLmZvckVhY2goKGNvbnRhaW5lcikgPT4ge1xuICAgICAgbGV0IGpzb24gPSBjb250YWluZXIuZGF0YXNldC5mZlJ1bGU7XG4gICAgICBpZiAoL14nLionJC8udGVzdChqc29uKSkge1xuICAgICAgICBqc29uID0ganNvbi5zdWJzdHJpbmcoMSwganNvbi5sZW5ndGggLSAxKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcnVsZSA9IEpTT04ucGFyc2UoanNvbik7XG4gICAgICBjb25zdCB0YXJnZXRzID0gW107XG5cbiAgICAgIHJ1bGUuY3JpdGVyaWEuZm9yRWFjaCgoY3JpdGVyaWEpID0+IHtcbiAgICAgICAgY29uc3QgeyB0Z3Q6IHRhcmdldCwgbzogb3BlcmFuZCwgdmFsOiB2YWx1ZSB9ID0gY3JpdGVyaWE7XG4gICAgICAgIGxldCBlbGVtZW50cztcbiAgICAgICAgbGV0IGlzTXVsdGlwbGUgPSBmYWxzZTtcblxuICAgICAgICBpZiAoZm9ybS5lbGVtZW50c1t0YXJnZXRdKSB7XG4gICAgICAgICAgY29uc3QgdGFnTmFtZSA9IGZvcm0uZWxlbWVudHNbdGFyZ2V0XS50YWdOYW1lO1xuXG4gICAgICAgICAgaWYgKHRhZ05hbWUpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzID0gW2Zvcm0uZWxlbWVudHNbdGFyZ2V0XV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzID0gZm9ybS5lbGVtZW50c1t0YXJnZXRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChmb3JtLmVsZW1lbnRzW3RhcmdldCArICdbXSddKSB7XG4gICAgICAgICAgZWxlbWVudHMgPSBmb3JtLmVsZW1lbnRzW3RhcmdldCArICdbXSddO1xuICAgICAgICAgIGlzTXVsdGlwbGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0cy5wdXNoKHtcbiAgICAgICAgICBpc011bHRpcGxlLFxuICAgICAgICAgIGVsZW1lbnRzLFxuICAgICAgICAgIG9wZXJhbmQsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAobGV0IGVsZW1lbnRJbmRleCA9IDA7IGVsZW1lbnRJbmRleCA8IGVsZW1lbnRzLmxlbmd0aDsgZWxlbWVudEluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHNbZWxlbWVudEluZGV4XTtcblxuICAgICAgICAgIGxldCBldmVudFR5cGU7XG4gICAgICAgICAgc3dpdGNoICh0aGlzLmdldElucHV0VHlwZShlbGVtZW50KSkge1xuICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOlxuICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICBldmVudFR5cGUgPSAnY2xpY2snO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgICAgIGNhc2UgJ2RhdGUnOlxuICAgICAgICAgICAgICBldmVudFR5cGUgPSAnY2hhbmdlJztcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGV2ZW50VHlwZSA9ICdrZXl1cCc7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsICgpID0+IGNvbnRhaW5lci5kaXNwYXRjaEV2ZW50KHRoaXMuY3JlYXRlUnVsZUFwcGxpY2F0aW9uRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5jb250YWluZXJNZXRhRGF0YS5zZXQoY29udGFpbmVyLCB7IHJ1bGUsIHRhcmdldHMgfSk7XG5cbiAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKHRoaXMuRVZFTlRfQVBQTFlfUlVMRVMsIHRoaXMuYXBwbHlSdWxlcyk7XG4gICAgICBjb250YWluZXIuZGlzcGF0Y2hFdmVudCh0aGlzLmNyZWF0ZVJ1bGVBcHBsaWNhdGlvbkV2ZW50KCkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGxpZXMgYWxsIG9mIHRoZSBydWxlcyBmb3IgdGhlIHRhcmdldCBjb250YWluZXJcbiAgICogZGVjaWRlcyB3aGV0aGVyIHRvIHNob3cgb3IgaGlkZSBpdCBiYXNlZCBvbiBpdHMgcnVsZXNcbiAgICpcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBhcHBseVJ1bGVzID0gKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgeyB0YXJnZXQ6IGNvbnRhaW5lciB9ID0gZXZlbnQ7XG4gICAgY29uc3Qge1xuICAgICAgdGFyZ2V0cyxcbiAgICAgIHJ1bGU6IHsgdHlwZSwgc2hvdyB9LFxuICAgIH0gPSB0aGlzLmNvbnRhaW5lck1ldGFEYXRhLmdldChjb250YWluZXIpO1xuXG4gICAgbGV0IHRyaWdnZXJzQ2hhbmdlID0gdHlwZSA9PT0gdGhpcy5SVUxFX1RZUEVfQUxMO1xuXG4gICAgdGFyZ2V0cy5mb3JFYWNoKCh0YXJnZXQpID0+IHtcbiAgICAgIGNvbnN0IHsgZWxlbWVudHMsIG9wZXJhbmQsIHZhbHVlIH0gPSB0YXJnZXQ7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBbXTtcbiAgICAgIGxldCBpc0NoZWNrYm94T3JSYWRpbyA9IGZhbHNlO1xuXG4gICAgICBmb3IgKGxldCBlbGVtZW50SW5kZXggPSAwOyBlbGVtZW50SW5kZXggPCBlbGVtZW50cy5sZW5ndGg7IGVsZW1lbnRJbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tlbGVtZW50SW5kZXhdO1xuICAgICAgICBjb25zdCB0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTtcblxuICAgICAgICBpZiAoWydjaGVja2JveCcsICdyYWRpbyddLmluZGV4T2YodHlwZSkgIT09IC0xKSB7XG4gICAgICAgICAgaXNDaGVja2JveE9yUmFkaW8gPSB0cnVlO1xuICAgICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09PSAnY2hlY2tib3gnICYmICEvXFxdJC8udGVzdChlbGVtZW50Lm5hbWUpKSB7XG4gICAgICAgICAgICAgIHZhbHVlcy5wdXNoKCcxJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YWx1ZXMucHVzaChlbGVtZW50LnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZXMucHVzaChlbGVtZW50LnZhbHVlLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBpc01hdGNoaW5nO1xuICAgICAgaWYgKGlzQ2hlY2tib3hPclJhZGlvICYmIHZhbHVlID09PSAnJykge1xuICAgICAgICBpc01hdGNoaW5nID0gb3BlcmFuZCA9PT0gJz0nID8gIXZhbHVlcy5sZW5ndGggOiAhIXZhbHVlcy5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcGF0dGVybiA9IHdpbGRjYXJkVG9SZWdFeHAodmFsdWUpO1xuICAgICAgICBsZXQgdmFsdWVJc0luTGlzdCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCB2YWxJbmRleCA9IDA7IHZhbEluZGV4IDwgdmFsdWVzLmxlbmd0aDsgdmFsSW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHZhbHVlc1t2YWxJbmRleF07XG4gICAgICAgICAgaWYgKHBhdHRlcm4udGVzdCh2YWwpKSB7XG4gICAgICAgICAgICB2YWx1ZUlzSW5MaXN0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpc01hdGNoaW5nID0gb3BlcmFuZCA9PT0gJz0nID8gdmFsdWVJc0luTGlzdCA6ICF2YWx1ZUlzSW5MaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZSA9PT0gdGhpcy5SVUxFX1RZUEVfQU5ZICYmIGlzTWF0Y2hpbmcpIHtcbiAgICAgICAgdHJpZ2dlcnNDaGFuZ2UgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUgPT09IHRoaXMuUlVMRV9UWVBFX0FMTCAmJiAhaXNNYXRjaGluZykge1xuICAgICAgICB0cmlnZ2Vyc0NoYW5nZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29udGFpbmVyLmRhdGFzZXQuaGlkZGVuQnlSdWxlcyA9IHRyaWdnZXJzQ2hhbmdlID8gIXNob3cgOiBzaG93O1xuICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gdHJpZ2dlcnNDaGFuZ2UgPyAoc2hvdyA/ICdibG9jaycgOiAnbm9uZScpIDogc2hvdyA/ICdub25lJyA6ICdibG9jayc7XG4gIH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGlucHV0IHR5cGUgb2YgYW4gZWxlbWVudCwgZS5nLlxuICAgKiBzZWxlY3QsIHRleHRhcmVhLCB0ZXh0LCBjaGVja2JveCwgcmFkaW8sIHBhc3N3b3JkLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50XG4gICAqIEByZXR1cm5zIHsqfVxuICAgKi9cbiAgZ2V0SW5wdXRUeXBlID0gKGVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB0YWdOYW1lID0gZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAoWydzZWxlY3QnLCAndGV4dGFyZWEnXS5pbmRleE9mKHRhZ05hbWUpICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRhZ05hbWU7XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmb3JtLWRhdGUtdGltZS1maWVsZCcpKSB7XG4gICAgICByZXR1cm4gJ2RhdGUnO1xuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvTG93ZXJDYXNlKCk7XG4gIH07XG5cbiAgY3JlYXRlUnVsZUFwcGxpY2F0aW9uRXZlbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBldmVudC5pbml0RXZlbnQodGhpcy5FVkVOVF9BUFBMWV9SVUxFUywgdHJ1ZSwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJ1bGVTZXQ7XG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n")}});