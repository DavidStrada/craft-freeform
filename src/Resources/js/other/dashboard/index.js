"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r)){for(var e=0,t=new Array(r.length);e<r.length;e++)t[e]=r[e];return t}}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}!function(){$(".card-actions a.delete-form").on({click:function(r){var e=r.target.dataset,t=e.id,a=e.message;if(confirm(a)){var o;$.ajax({type:"post",url:Craft.getCpUrl("freeform/forms/delete"),data:(o={},_defineProperty(o,Craft.csrfTokenName,Craft.csrfTokenValue),_defineProperty(o,"id",t),o),success:function(e){var t=e.error,a=void 0===t?null:t;return a?void Craft.cp.displayError(a):void $(r.target).parents("li[data-id]").remove()},error:function(r){Craft.cp.displayError(r)}})}}}),$(".card-actions a.duplicate-form").on({click:function(r){var e=r.target.dataset,t=e.id,a=e.message;if(confirm(a)){var o;$.ajax({type:"post",url:Craft.getCpUrl("freeform/forms/duplicate"),data:(o={},_defineProperty(o,Craft.csrfTokenName,Craft.csrfTokenValue),_defineProperty(o,"id",t),o),success:function(r){var e=r.errors,t=void 0===e?[]:e;return t.length?void t.forEach(function(r){return Craft.cp.displayError(r)}):void window.location.reload()},error:function(r){console.log(r),Craft.cp.displayError(r.message)}})}}});var r=document.getElementById("form-cards");if(r){var e=new Sortable["default"](r,{draggable:"li[data-id]",handle:".drag-handle"});e.on("sortable:stop",function(){setTimeout(function(){var r,e=_toConsumableArray(document.querySelectorAll("#form-cards > li")).map(function(r){return r.dataset.id});$.ajax({type:"post",url:Craft.getCpUrl("freeform/forms/sort"),data:(r={},_defineProperty(r,Craft.csrfTokenName,Craft.csrfTokenValue),_defineProperty(r,"order",e),r)})},100)})}$("a.reset-spam").on({click:function(){var r,e=$(this).data(),t=e.id,a=e.message,o=$(this);return!!confirm(a)&&($.ajax({url:Craft.getCpUrl("freeform/forms/reset-spam-counter"),type:"post",dataType:"json",data:(r={},_defineProperty(r,Craft.csrfTokenName,Craft.csrfTokenValue),_defineProperty(r,"formId",t),r),success:function(r){r.success?o.siblings(".counter").html("0"):console.error(r)}}),!1)}}),$(".exporter").on({change:function(){var r=$(this).val();r&&$(this).parents("form").submit(),$(this).val("")}})}();