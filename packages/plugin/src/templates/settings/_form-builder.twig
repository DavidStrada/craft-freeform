{% extends "freeform/_layouts/settings" %}

{% import "_includes/forms" as forms %}

{% set title = "Form Builder"|t("freeform") %}

{% block content %}

    <input type="hidden" name="action" value="freeform/settings/save-settings">
    {{ redirectInput('freeform/settings/form-builder') }}
    {{ csrfInput() }}

    <div class="first">
    {{ forms.lightswitchField({
        label: "Live Render HTML Markup"|t('freeform'),
        instructions: "Live rendering HTML markup in field labels, option labels and HTML blocks inside the Form Builder interface can sometimes conflict with Freeform's display of the form preview
inside the control panel. In cases like these, you'll need to disable this setting to prevent HTML from rendering automatically."|t('freeform'),
        name: "settings[renderFormHtmlInCpViews]",
        on: settings.renderFormHtmlInCpViews,
        errors: settings.errors("renderFormHtmlInCpViews"),
    }) }}
    </div>

    {{ forms.lightswitchField({
        label: "Allow Twig to be enabled in HTML blocks"|t('freeform'),
        instructions: "A toggle will appear for each HTML block field inside the form builder, allowing the use of Twig code.",
        name: "settings[twigInHtml]",
        on: settings.twigInHtml,
        errors: settings.errors("twigInHtml"),
    }) }}

    <div id="isolated-twig" class="field {{ not settings.twigInHtml ? 'hidden' }}">
        {{ forms.lightswitchField({
            label: "Render HTML block Twig in Isolated Mode"|t('freeform'),
            instructions: "When enabled, only the Freeform 'form' and 'fields' variables will be available. If disabled, Craft's variables will be included as well."|t('freeform'),
            name: "settings[twigInHtmlIsolatedMode]",
            on: settings.twigInHtmlIsolatedMode,
            errors: settings.errors("twigInHtmlIsolatedMode"),
        }) }}
    </div>

    {{ forms.lightswitchField({
        label: "Include Freeform's Sample Formatting Templates"|t('freeform'),
        instructions: "Allow users to select a sample formatting template included with Freeform for the form's Formatting Template setting."|t('freeform'),
        name: "settings[defaultTemplates]",
        on: settings.defaultTemplates,
        errors: settings.errors("defaultTemplates"),
    }) }}

    <hr />
    <h2>{{ "Form Builder Defaults"|t('freeform') }}</h2>

    {{ forms.lightswitchField({
        label: "AJAX Enabled for Forms by Default"|t('freeform'),
        instructions: 'By default, the "Enable AJAX" feature checkbox will be checked for new forms.'|t('freeform'),
        name: "settings[ajaxByDefault]",
        on: settings.ajaxByDefault,
        errors: settings.errors("ajaxByDefault"),
    }) }}

    {{ forms.selectField({
        label: "Default Formatting Template"|t('freeform'),
        instructions: "The default formatting template for new forms."|t('freeform'),
        name: "settings[formattingTemplate]",
        value: settings.formattingTemplate,
        errors: settings.errors("formattingTemplate"),
        options: formattingTemplateList,
    }) }}

{% endblock %}
