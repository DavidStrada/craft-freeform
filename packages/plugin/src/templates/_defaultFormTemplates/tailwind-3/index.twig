{% include "freeform/_defaultFormTemplates/tailwind-3/_main.css" %}
{% import "freeform/_defaultFormTemplates/tailwind-3/_row.twig" as rowMacro %}

{{ form.renderTag({
    attributes: {
        row: { class: "flex flex-wrap -mx-2 mb-4" },
        errors: { class: "freeform-form-has-errors" },
    }
}) }}

<script>
    var form = document.querySelector('[data-id="{{ form.anchor }}"]');
    if (form) {
        form.addEventListener("freeform-ready", function (event) {
            var freeform = event.target.freeform;
            freeform.setOption("errorClassBanner", ["bg-red-100", "border", "border-red-400", "text-red-700", "px-4", "py-3", "rounded", "relative", "mb-4"]);
            freeform.setOption("errorClassList", ["errors", "text-red-500", "text-sm", "italic"]);
            freeform.setOption("errorClassField", ["border-red-500"]);
            freeform.setOption("successClassBanner", ["bg-green-100", "border", "border-green-500", "text-green-700", "px-4", "py-3", "rounded", "relative", "mb-4"]);
        })
        form.addEventListener("freeform-stripe-styling", function (event) {
            event.detail.base = {
                fontSize: "16px",
                fontFamily: "-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,\"Helvetica Neue\",Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"",
            }
        })
    }
</script>

{% if form.pages|length > 1 %}
    <ul class="flex border-b-2 border-slate-300 mb-6">
        {% for page in form.pages %}
            <li class="mr-1">
                <span class="inline-block rounded-t py-2 px-5 {{ form.currentPage.index == page.index ? 'bg-slate-300 border-l border-t border-r border-slate-300 text-slate-800 font-semibold' : 'bg-white text-slate-500 font-normal' }}">{{ page.label }}</span>
            </li>
        {% endfor %}
    </ul>
{% endif %}

{% if not form.ajaxEnabled and form.submittedSuccessfully %}
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4" role="alert">
        <strong class="font-bold">
            {{ form.settings.behavior.successMessage | t('freeform') }}
        </strong>
    </div>
{% endif %}

{% if form.hasErrors %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
        <strong class="font-bold">
            {{ form.settings.behavior.errorMessage | t('freeform') }}
        </strong>
        {% if form.errors|length %}
            <ul class="mb-0 ">
                {% for error in form.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
{% endif %}

{{ rowMacro.render(form.rows, form) }}

{{ form.renderClosingTag }}
