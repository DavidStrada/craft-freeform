{% macro getFieldTemplate(type) -%}
    {% set fieldTemplatePath = "freeform/_defaultFormTemplates/bootstrap-5-dark/fields/" -%}
    {{- fieldTemplatePath ~ type ~ ".twig" -}}
{%- endmacro %}

{% macro render(rows, form) %}
    {% import _self as self %}

    {% for row in rows %}

        {% set width = (12 / (row|length)) %}

        <div{{ form.attributes.row }}>
            {% for field in row %}

                {% do field.setParameters({
                    attributes: {
                        container: {
                            class: [
                                "mb-3",
                                "col-12",
                                "col-sm-" ~ width,
                            ],
                        },
                        input: {
                            novalidate: true,
                            class: [
                                "bg-dark-subtle text-white",
                                field.type != "signature" ? "form-control",
                                "freeform-fieldtype-" ~ field.type,
                                field.hasErrors ? "is-invalid has-validation",
                                field.type == "file" ? "form-control-file",
                                field.type == "dropdown" ? "form-select bg-dark-subtle text-white",
                                field.type == "signature" ? "btn btn-light",
                                field.type == "checkbox" ? "checkbox",
                            ]
                        },
                        label: {
                            class: [
                                "mb-1",
                                field.required ? "required"
                            ]
                        },
                        instructions: {
                            class: [
                                "freeform-instructions",
                                "form-text",
                                "text-muted"
                            ]
                        },
                        error: { class: "invalid-feedback" },
                    }
                }) %}

                {% include [self.getFieldTemplate(field.type), self.getFieldTemplate("_default")] %}

            {% endfor %}
        </div>

    {% endfor %}

{% endmacro %}