{% macro getFieldTemplate(type) -%}
    {%- set fieldTemplatePath = "freeform/_defaultFormTemplates/basic-floating-labels/fields/" -%}
    {%- if type in ["text", "textarea", "email", "website", "confirm", "regex", "phone", "datetime", "number", "password"] -%}
        {{- fieldTemplatePath ~ "floating.twig" -}}
    {%- else -%}
        {{- fieldTemplatePath ~ type ~ ".twig" -}}
    {%- endif -%}
{%- endmacro %}

{% macro render(rows, form) %}
    {% import _self as self %}

    {% for row in rows %}
        
        {% set width = (12 / (row|length)) %}

        <div{{ form.attributes.row }}>
            {% for field in row %}

                {% do field.setParameters({
                    attributes: {
                        container: {
                            class: [
                                "freeform-col-" ~ width,
                                "freeform-fieldtype-" ~ field.type,
                                field.type in ["text", "textarea", "email", "website", "confirm", "regex", "phone", "datetime", "file", "dropdown", "multiple-select", "number", "password", "file-dnd", "signature", "credit-card"] ? "floating",
                            ],
                        },
                        input: {
                            novalidate: true,
                            class: [
                                field.hasErrors ? "is-invalid has-validation",
                                field.type not in ["save", "signature"] ? "freeform-input"
                            ]
                        },
                        label: { class: [
                            "freeform-label",
                            field.inputOnly ? "freeform-input-only-label",
                            field.required ? "freeform-required",
                        ]},
                        instructions: { class: ["freeform-instructions"] },
                        error: { class: "freeform-errors" },
                    }
                }) %}

                {% include [self.getFieldTemplate(field.type), self.getFieldTemplate("_default")] %}

            {% endfor %}
        </div>

    {% endfor %}

{% endmacro %}