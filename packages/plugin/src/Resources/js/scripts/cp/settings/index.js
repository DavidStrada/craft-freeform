$((function(){var e=$("#session-time"),n=$("#session-count"),a=$("#session-secret");$("select#session-context").on({change:function(){switch($(this).val()){case"payload":a.removeClass("hidden"),n.addClass("hidden"),e.addClass("hidden");break;case"session":case"database":a.addClass("hidden"),n.removeClass("hidden"),e.removeClass("hidden")}}}),$("input[name='purge-toggle']").parents(".lightswitch").on({change:function(){$("input",this).val()||$("select#purge-value").val(0)}}),$("select#spam-protection-behaviour").on({change:function(){var e=$("#custom-spam-error-message");"display_errors"===$(this).val()?e.show("fast"):e.hide("fast")}});var s=$('select[name="settings[scriptInsertLocation]"]'),t=$("#script-insert-warning").text();s.on({change:function(){var e=$(this).val(),n=$(this).parents(".field:first");if("manual"===e){var a=document.createElement("div");a.classList.add("warning","with-icon"),a.innerText=t,console.log(n,a),n.append(a)}else n.find(".warning.with-icon").remove()}}),s.trigger("change");var i=$("#notifications-migrator");i&&$("#migrate",i).on({click:function(e){if(!confirm("Are you sure you want to migrate database notifications to file based ones?"))return e.preventDefault(),e.stopPropagation(),!1;var n,a,s,t=$("#remove-files",i).is(":checked");return $.ajax({url:Craft.getCpUrl("freeform/migrate/notifications/db-to-file"),type:"post",dataType:"json",contentType:"application/json",data:JSON.stringify((n={removeDbNotifications:t},a=Craft.csrfTokenName,s=Craft.csrfTokenValue,a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n)),success:function(e){e.success&&i.html($('<div class="pane">\n                  <p>\n                    <span class="checkmark-icon"></span>\n                    Migrated successfully\n                  </p> \n                </div>\n                '))}}),e.preventDefault(),e.stopPropagation(),!1}})}));